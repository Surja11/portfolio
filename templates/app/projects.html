
{% load static %}

<div class="projects" id="projects">
  <h2 >Projects</h2>
  <br><br>
  
  <div class="project-slider">
    <img id="project-img" class="project-image" />
    <br>
    <h3 id="project-name"></h3>
    <br>
    <p id="project-tech" class="project-tech"></p>
    <br>
    <p id="project-desc" class="project-desc"></p>
    <br>
    <a id="project-link" href="#" target="_blank" class="project-link">View Project</a>
    <br>
  
    <div class="nav-buttons">
      <button class="prev-btn">&lt;</button>
      <div class="slider-dots"></div>  <!-- Added dots container -->
      <button class="next-btn">&gt;</button>
    </div>
  </div>
</div>

<style>
  /* Add these new styles */
  .slider-dots {
    display: flex;
    gap: 8px;
    margin: 0 10px;
  }
  
  .slider-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ccc;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  
  .slider-dot.active {
    background: #333;
  }
  
  .nav-buttons {
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

<script>
  const projects = [
    {% for project in projects %}
      {
        id: {{ project.id }},
        name: "{{ project.name|escapejs }}",
        description: "{{ project.short_description|escapejs }}",
        img: "{{ project.thumbnail.url }}",
        tech: "{{ project.tech_used|escapejs }}",
        link: "{{ project.link|escapejs }}"
      }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ];

  let currentProject = 0;

  function showProject(index) {
    const p = projects[index];
    document.getElementById("project-img").src = p.img;
    document.getElementById("project-name").textContent = p.name;
    document.getElementById("project-tech").textContent = p.tech;
    document.getElementById("project-desc").textContent = p.description;
    document.getElementById("project-link").href = p.link;
    
    // Update active dot
    document.querySelectorAll('.slider-dot').forEach((dot, i) => {
      dot.classList.toggle('active', i === index);
    });
  }

  // Initialize dots
  function initDots() {
    const dotsContainer = document.querySelector('.slider-dots');
    projects.forEach((_, i) => {
      const dot = document.createElement('div');
      dot.classList.add('slider-dot');
      if (i === 0) dot.classList.add('active');
      dot.addEventListener('click', () => {
        currentProject = i;
        showProject(currentProject);
      });
      dotsContainer.appendChild(dot);
    });
  }

  document.addEventListener("DOMContentLoaded", function () {
    initDots();
    showProject(currentProject);

    document.querySelector(".next-btn").addEventListener("click", function () {
      currentProject = (currentProject + 1) % projects.length;
      showProject(currentProject);
    });

    document.querySelector(".prev-btn").addEventListener("click", function () {
      currentProject = (currentProject - 1 + projects.length) % projects.length;
      showProject(currentProject);
    });
  });
</script>